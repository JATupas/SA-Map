{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHADE Project PH</title>
    <link rel="icon" href="{% static 'images/SHADE-Circle.ico' %}" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/stylesheet-SA-PGA.css' %}">
    <!-- Include Leaflet CSS for the map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>


</head>

<body>
    <header>
        <div class="header-container">
            <div class="logo-container">
                <img src="{% static 'images/SHADE LOGO.png' %}" alt="PHIVOLCS Logo" class="logo">
                <div class="text-container">
                    <h2>Philippine Institute of Volcanology and Seismology</h2>
                    <h1>SHADE PH</h1>
                </div>
            </div>
            <nav>
                <a href="{% url 'shade_redesign' %}" class="nav-link">Home</a>
                <a href="#About-section" class="nav-link">About</a>
                <!-- <span class="separator">|</span>
                <b href="#" class="nav-link">Register</b>
                <a href="#" class="nav-button">Log In</a> -->
            </nav>
        </div>
    </header>
    
    <main>
        <section class="Home" id="Home">
            <div class="container1">
                <div class="Title">
                    <h1>SHADE Project PH</h1>
                    <p>Seismic Hazard Assessment for Design Earthquake of the Philippines</p>
                </div>
                
                <div class="container2">
                    <div class="map-card">
                        <div id="map" class="map"></div> <!-- Map placed inside card -->
                        <p class="map-disclaimer">Updated Maps and Data as of November 2024</p>
                    </div>

                    <div class="form">
                        <div class="form-card">
                            <div class="form-header">
                                <img src="{% static 'images/ORC Header.svg' %}" class="card-icon">
                                <h2>Ground Motion Intensity Measures</h2>
                            </div>                                   
                            
                            <div class="form-content">
                                <form id="coordinates-form" method="POST">
                                    {% csrf_token %}
                                    <!-- Current coordinates fields -->

                                    <!-- <button id="toggle-view" type="button" class="btn btn-primary">Switch to DMS</button> -->

                                    <div class="toggle-buttons">
                                        <input type="radio" id="toggle-decimal" name="view-toggle" value="decimal-degrees" checked>
                                        <label for="toggle-decimal">Decimal Degrees</label>

                                        <input type="radio" id="toggle-dms" name="view-toggle" value="dms">
                                        <label for="toggle-dms">DMS</label>
                                    </div>                                                                      
                                    
                                    <div id="dms-fields" style="display: none;">
                                        <div class="mb-3">
                                            <label for="lon-degrees" class="form-label">Longitude (DMS)</label>
                                            <div class="d-flex">
                                                <input type="text" id="lon-degrees" class="form-control" placeholder="0.0°">
                                                <input type="text" id="lon-minutes" class="form-control" placeholder="0.0'">
                                                <input type="text" id="lon-seconds" class="form-control" placeholder="0.0''">
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="lat-degrees" class="form-label">Latitude (DMS)</label>
                                            <div class="d-flex">
                                                <input type="text" id="lat-degrees" class="form-control" placeholder="0.0°">
                                                <input type="text" id="lat-minutes" class="form-control" placeholder="0.0'">
                                                <input type="text" id="lat-seconds" class="form-control" placeholder="0.0''">
                                            </div>
                                        </div>
                                    </div>

                                     <!-- Decimal Degrees Fields -->
                                    <div id="decimal-degrees-fields">
                                        <div class="mb-3">
                                            <label for="current-lon" class="form-label">Longitude (Decimal Degrees)</label>
                                            <input type="text" id="current-lon" class="form-control" placeholder="0.0">
                                        </div>

                                        <div class="mb-3">
                                            <label for="current-lat" class="form-label">Latitude (Decimal Degrees)</label>
                                            <input type="text" id="current-lat" class="form-control" placeholder="0.0">
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label for="site" class="form-label">Site Classification</label>
                                        <div class="site-select" tabindex="0">
                                            <span class="select">Please Select</span>
                                            <img src="{% static 'images/expand_more.svg' %}" class="arrow-down">
                                        </div>
                                        <div class="site-option-list">
                                            <div class="option" data-value="A">A</div>
                                            <div class="option" data-value="B">B</div>
                                            <div class="option" data-value="C">C</div>
                                            <div class="option" data-value="D">D</div>
                                            <div class="option" data-value="E">E</div>
                                            <div class="option" data-value="F">F</div>
                                            <!-- Add more options as needed -->
                                        </div>
                                        <input type="hidden" id="site" name="site">
                                    </div>

                                    <div class="mb-3" style="display: none;">
                                        <label for="fainput" class="form-label">Fa</label>
                                        <input type="text" id="fainput" class="form-control" value="1">
                                        <span id="error-message" style="color: red; display: none;">Error: Value cannot be 0</span>
                                    </div>
                                    <div class="mb-3" style="display: none;">
                                        <label for="fvinput" class="form-label">Fv</label>
                                        <input type="text" id="fvinput" class="form-control" value="1">
                                    </div>

                                </form>                          
                                <div class="button-group">
                                    <button type="button" id="check-data">Check Data</button>
                                </div>
                                <div id="loading-popup" style="display: none;" class="loading-popup ">
                                    <div class="popup-content">
                                        <p>Processing data, please wait...</p>
                                        <img src="{% static 'images/SHADE_Loading.gif' %}" alt="Loading..." class="loading-animation">
                                        <button id="done_button" style="display: none;">Done</button>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                    
                </div>
        
        <!-- Site Information and Graph Section -->
        <section class="site-info-graph-section" id="site-info-section">
            <div class="site-info-card" id="site-info-card">

                <div class="site-info-header">
                    <h2>Site Information</h2>

                    <div class="site-info-button-group">
                        <button type="button" id="email-results">Email Results</button>
                    </div>
                </div>

                <div class="container3">
                    <div class="site-info site-info-1">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td class="SA-title">Latitude (Decimal)</td>
                                    <td id="long" class="SA-value"></td>
                                </tr>
                                <tr>
                                    <td class="SA-title">Longitude (Decimal)</td>
                                    <td id="lat" class="SA-value"></td>
                                </tr>
                                <tr>
                                    <td class="SA-title">Latitude (DMS)</td>
                                    <td id="lat-dms" class="SA-value">
                                        <div class="dms-container">
                                            <span id="lat-degrees"></span><span class="dms-symbol">°</span>
                                            <span id="lat-minutes"></span><span class="dms-symbol">'</span>
                                            <span id="lat-seconds"></span><span class="dms-symbol">''</span>        
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="SA-title">Longitude (DMS)</td>
                                    <td id="lon-dms" class="SA-value">
                                        <div class="dms-container">
                                            <span id="lon-degrees"></span><span class="dms-symbol">°</span>
                                            <span id="lon-minutes"></span><span class="dms-symbol">'</span>
                                            <span id="lon-seconds"></span><span class="dms-symbol">''</span>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="SA-title">Site Class</td>
                                    <td id="site-class-info" class="SA-value">A</td>
                                </tr>
                                <tr>
                                    <td class="SA-title">SA<sub>1</sub></td>
                                    <td id="sa1-value" class="SA-value">0.0</td>
                                </tr>
                                <tr>
                                    <td class="SA-title">SA<sub>02</sub></td>
                                    <td id="sa02-value" class="SA-value">0.0</td>
                                </tr>
                                <tr>
                                    <td class="SA-title">T<sub>L</sub></td>
                                    <td id="tl-value" class="SA-value">0.0</td>
                                </tr>
                                <tr>
                                    <td class="SA-title">Fa</td>
                                    <td id="Fa-value" class="SA-value">0.0</td>
                                </tr>
                                <tr>
                                    <td class="SA-title">Fv</td>
                                    <td id="Fv-value" class="SA-value">0.0</td>
                                </tr>
                                <tr>
                                    <td class="SA-title">SMS</td>
                                    <td id="SMS-value" class="SA-value">0.0</td>
                                </tr>
                                <tr>
                                    <td class="SA-title">SM1</td>
                                    <td id="SM1-value" class="SA-value">0.0</td>
                                </tr>
                                <tr>
                                    <td class="SA-title">SDS</td>
                                    <td id="SDS-value" class="SA-value">0.0</td>
                                </tr>
                                <tr>
                                    <td class="SA-title">SD1</td>
                                    <td id="SD1-value" class="SA-value">0.0</td>
                                </tr>
                                <tr>
                                    <td class="SA-title">Ts</td>
                                    <td id="Ts-value" class="SA-value">0.0</td>
                                </tr>
                                <tr>
                                    <td class="SA-title">To</td>
                                    <td id="To-value" class="SA-value">0.0</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div id="image-container" class="graph-container site-info-2">
                        {% if image_base64 %}
                            <h3>ASCE 7-05 Plot</h3>
                            <img src="data:image/png;base64,{{ image_base64 }}" alt="Spectral Acceleration Plot">
                        {% endif %}
                    </div>

                </div>
            </div>
        </section>

            <div id="popup" class="popup" style="display: none;">
            </div>

        </section>

        <section class="background">
        </section>

        {% comment %} <section class="Info_Section1">
                <div class="Section1" id="About-section">
                    <img src="{% static 'images/NO IMAGE DARK.svg' %}" alt="Img 1" class="img2">
                    <div class="text">
                        <!-- <h4>Section title</h4> -->
                        <h5>Title</h5>
                        <p>Nunc, mattis arcu eu ut quisque quam. Nunc rhoncus, arcu venenatis consectetur facilisis. Nibh nibh porttitor lectus sit porta vestibulum. Gravida ultricies ultrices velit adipiscing nec ultricies curabitur adipiscing non. Porttitor feugiat at duis aliquam, viverra et amet. Duis pellentesque integer sem sit. Nisl praesent aliquam tellus metus sem id. Feugiat maecenas sollicitudin sed fusce turpis vel hendrerit. Commodo massa ac justo faucibus faucibus ipsum amet. Arcu tincidunt mattis lectus pellentesque in.</p>
                        <p>Nunc, mattis arcu eu ut quisque quam. Nunc rhoncus, arcu venenatis consectetur facilisis. Nibh nibh porttitor lectus sit porta vestibulum. Gravida ultricies ultrices velit adipiscing nec ultricies curabitur adipiscing non. Porttitor feugiat at duis aliquam, viverra et amet. Duis pellentesque integer sem sit. Nisl praesent aliquam tellus metus sem id. Feugiat maecenas sollicitudin sed fusce turpis vel hendrerit. Commodo massa ac justo faucibus faucibus ipsum amet. Arcu tincidunt mattis lectus pellentesque in.</p>
                    </div>
            </div>
        </section> {% endcomment %}

    </main>

    <footer>
        <nav>
            <a href="#">Our Vision</a>
            <a href="#">Features</a>
            <a href="#">Our Team</a>
            <a href="#">Latest News</a>
            <a href="#">Contact</a>
        </nav>
        <p>Copyright © SHADE PH 2024</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <script>
        // Get the registration data from the template context
        var registrationData = null;
        
        // Try to parse the registration data if it exists in the template context
        try {
            registrationData = JSON.parse('{{ registration_data|escapejs }}');
        } catch (e) {
            console.log("No registration data found.");
        }
    
        // If registration data is not present, redirect to the registration page
        if (!registrationData) {
            console.log("Redirecting to registration page...");
            window.location.href = "{% url 'register' %}";
        } else {
            // Log the registration data to the console
            console.log("Registration Data: ", registrationData);
        }

        const saPgaMapUrl = "{% url 'sa_pga_map' %}"
        const csrfToken = '{{ csrf_token }}'
        const emailUrl = "{% url 'send_email' %}"
    </script>
    <script src="{% static 'js/sa-pga-map.js' %}"></script>
</body>
</html>
