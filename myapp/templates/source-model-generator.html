{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHADE Project PH</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/stylesheet-SMG.css' %}">
</head>

<body>
    <header>
        <div class="header-container">
            <div class="logo-container">
                <img src="{% static 'images/SHADE LOGO.png' %}" alt="PHIVOLCS Logo" class="logo">
                <div class="text-container">
                    <h2>Philippine Institute of Volcanology and Seismology</h2>
                    <h1>SHADE PH</h1>
                </div>
            </div>
            <nav>
                <a href="{% url 'shade_redesign' %}" class="nav-link">Home</a>
                <a href="#About-section" class="nav-link">About</a>
                <!-- <span class="separator">|</span>
                <b href="#" class="nav-link">Register</b>
                <a href="#" class="nav-button">Log In</a> -->
            </nav>
        </div>
    </header>
    
    <main>
        <section class="Home" id="Home">
            <div class="container1">
                <div class="Title">
                    <h1>SHADE Project PH</h1>
                    <p>Seismic Hazard Assessment for Design Earthquake of the Philippines</p>
                </div>
                
                <div class="container2">
                    <div class="about-card" id="about-card">
                        <img src="{% static 'images/NO IMAGE DARK.svg' %}" alt="Img 1" class="img1">
                        <h2 id="about-title">About</h2>
                        <p id="about-description">
                            Lorem ipsum dolor sit amet consectetur. Vestibulum urna pulvinar aliquam volutpat. Sed libero egestas felis faucibus id nunc. Integer dui amet sagittis sed et consequat. Non tempus tempor aliquet lacus potenti aliquam.
                        </p>
                    </div>

                    <div class="form">
                        <div class="form-card">
                            <div class="form-header">
                                <img src="{% static 'images/SMG Header.svg' %}" class="card-icon">
                                <h2>Source Model Generator</h2>
                            </div>                                   
                            
                            <div class="form-content">
                                <form id="source-model-form">
                                    <div class="fault-group">
                                        <label for="fault-file-path"> Fault Input File</label>
                                        <input type="text" id="fault-file-path" name="fault_file_path" placeholder="C:/Users/SHADE/ShadeApp/demos/Source Model Generator/INPUT/Fault Input.xlsx">
                                    </div>
                                    <div class="earthquake-group">
                                        <label for="earthquake-file-path">Earthquake Input File</label>
                                        <input type="text" id="earthquake-file-path" name="earthquake_file_path" placeholder="C:/Users/SHADE/ShadeApp/demos/Source Model Generator/INPUT/Fault Input.xlsx">
                                    </div>
                                    <div class="vertice-group">
                                        <label for="vertice-file-path">Vertice Input File</label>
                                        <input type="text" id="vertice-file-path" name="vertice_file_path" placeholder="C:/Users/SHADE/ShadeApp/demos/Source Model Generator/INPUT/Vertice Input.xlsx">
                                    </div>
                                    <div class="output-group">
                                        <label for="output-file-path">Output File</label>
                                        <input type="text" id="output-file-path" name="output_file_path" placeholder="C:/Users/SHADE/ShadeApp/demos/Source Model Generator/OUTPUT/source_model.txt">
                                    </div>
                                </form>
                            </div>

                            <div class="button-group">
                                <button type="button" id="model_button">Create Source Model</button>
                            </div>

                            <div id="loading-popup" style="display: none;" class="loading-popup ">
                                <div class="popup-content">
                                    <p>Processing data, please wait...</p>
                                    <img src="{% static 'images/SHADE_Loading.gif' %}" alt="Loading..." class="loading-animation">
                                    <button id="done_button" style="display: none;">Done</button>
                                </div>
                            </div>
                            
                            <style>
                                .loading-animation {
                                    width: 125px;
                                    height: 125px;
                                }
                            
                                #loading-popup {
                                    position: fixed;
                                    top: 0;
                                    left: 0;
                                    width: 100%;
                                    height: 100%;
                                    background-color: rgba(0, 0, 0, 0.5);
                                    display: flex;
                                    justify-content: center;
                                    align-items: center;
                                    z-index: 10000; /* High value to ensure it's above all other elements */
                                }
                            
                                .popup-content {
                                    background-color: white;
                                    padding: 20px;
                                    border-radius: 5px;
                                    text-align: center;
                                }
                            
                                button {
                                    margin-top: 10px;
                                }
                            </style>

                            <script src="{% static 'js/inputCleaner.js' %}"></script>

                            
                            <script>
                                document.addEventListener('DOMContentLoaded', function() {
                                    const modelButton = document.getElementById('model_button');
                                    const popup = document.getElementById('loading-popup');
                                    let processing = false;
                            
                                    modelButton.addEventListener('click', function() {
                                        const form = document.getElementById('source-model-form');
                                        const formData = new FormData(form);
                            
                                        // Show the loading popup
                                        popup.style.display = 'flex';
                                        processing = true;
                            
                                        fetch('/source_model_tool/', {
                                            method: 'POST',
                                            body: formData,
                                            headers: {
                                                'X-CSRFToken': '{{ csrf_token }}'
                                            }
                                        })
                                        .then(response => response.json())
                                        .then(data => {
                                            if (data.status === 'success') {
                                                alert('Source Model Generated!');
                                                popup.style.display = 'none';  // Close the popup
                                            } else {
                                                alert('Error: ' + data.message);
                                                popup.style.display = 'none';  // Close the popup
                                            }
                                        })
                                        .catch(error => {
                                            console.error('Error:', error);
                                            alert('An error occurred.');
                                            popup.style.display = 'none';  // Close the popup
                                        });
                                    });
                                });
                            </script>
                            

                            <script>
                                document.addEventListener('DOMContentLoaded', function() {
                                    const aboutTitle = document.getElementById('about-title');
                                    const aboutDescription = document.getElementById('about-description');

                                    // Source Model Inputs
                                    const faultInput = document.querySelector('.fault-group #fault-file-path'); // Fault Input File
                                    const earthquakeInput = document.querySelector('.earthquake-group #earthquake-file-path'); // Earthquake Input File
                                    const verticeInput = document.querySelector('.vertice-group #vertice-file-path'); // Vertice Input File
                                    const outputFileInput = document.querySelector('.output-group #output-file-path'); // Output File

                                    const defaultTitle = 'About';
                                    const defaultDescription = 'Lorem ipsum dolor sit amet consectetur. Vestibulum urna pulvinar aliquam volutpat. Sed libero egestas felis faucibus id nunc. Integer dui amet sagittis sed et consequat. Non tempus tempor aliquet lacus potenti aliquam.';

                                    // Function to reset to default about content
                                    function resetAboutCard() {
                                        aboutTitle.textContent = defaultTitle;
                                        aboutDescription.textContent = defaultDescription;
                                    }

                                    // Fault Input File focus event
                                    faultInput.addEventListener('focus', function() {
                                        aboutTitle.textContent = 'Specific Sources Input File';
                                        aboutDescription.innerHTML = `
                                            <p>The input file must contain basic information of each fault to be processed, the excel file must contain the following columns;</p>
                                            <ul>
                                                <li>name</li>
                                                <li>segment</li>
                                                <li>length (km)</li>
                                                <li>dip</li>
                                                <li>rake</li>
                                                <li>maxmag</li>
                                            </ul>
                                        `;
                                    });

                                    // Earthquake Input File focus event
                                    earthquakeInput.addEventListener('focus', function() {
                                        aboutTitle.textContent = 'Earthquake Input File';
                                        aboutDescription.textContent = 'Input file containing earthquake data relevant to the analysis.';
                                    });

                                    // Vertice Input File focus event
                                    verticeInput.addEventListener('focus', function() {
                                        aboutTitle.textContent = 'Vertice Input File';
                                        aboutDescription.textContent = 'This file should include multiple longitude and latitude vertices along the fault from one end to another.';
                                    });

                                    // Output File focus event
                                    outputFileInput.addEventListener('focus', function() {
                                        aboutTitle.textContent = 'Output File';
                                        aboutDescription.textContent = 'Specify the output location for the results of the source model analysis.';
                                    });

                                    // Reset to default when clicking outside the input fields
                                    document.addEventListener('click', function(e) {
                                        if (
                                            !e.target.closest('.fault-group') && 
                                            !e.target.closest('.earthquake-group') && 
                                            !e.target.closest('.vertice-group') && 
                                            !e.target.closest('.output-group')
                                        ) {
                                            resetAboutCard();
                                        }
                                    });
                                });
                            </script>


                        </div>
                    </div>
                </div>
                
            </div>
        </section>

        <section class="background">
        </section>

        <section class="Info_Section1">
                <div class="Section1" id="About-section">
                    <img src="{% static 'images/NO IMAGE DARK.svg' %}" alt="Img 1" class="img2">
                    <div class="text">
                        <!-- <h4>Section title</h4> -->
                        <h5>Title</h5>
                        <p>Nunc, mattis arcu eu ut quisque quam. Nunc rhoncus, arcu venenatis consectetur facilisis. Nibh nibh porttitor lectus sit porta vestibulum. Gravida ultricies ultrices velit adipiscing nec ultricies curabitur adipiscing non. Porttitor feugiat at duis aliquam, viverra et amet. Duis pellentesque integer sem sit. Nisl praesent aliquam tellus metus sem id. Feugiat maecenas sollicitudin sed fusce turpis vel hendrerit. Commodo massa ac justo faucibus faucibus ipsum amet. Arcu tincidunt mattis lectus pellentesque in.</p>
                        <p>Nunc, mattis arcu eu ut quisque quam. Nunc rhoncus, arcu venenatis consectetur facilisis. Nibh nibh porttitor lectus sit porta vestibulum. Gravida ultricies ultrices velit adipiscing nec ultricies curabitur adipiscing non. Porttitor feugiat at duis aliquam, viverra et amet. Duis pellentesque integer sem sit. Nisl praesent aliquam tellus metus sem id. Feugiat maecenas sollicitudin sed fusce turpis vel hendrerit. Commodo massa ac justo faucibus faucibus ipsum amet. Arcu tincidunt mattis lectus pellentesque in.</p>
                    </div>
            </div>
        </section>

    </main>

    <footer>
        <nav>
            <a href="#">Our Vision</a>
            <a href="#">Features</a>
            <a href="#">Our Team</a>
            <a href="#">Latest News</a>
            <a href="#">Contact</a>
        </nav>
        <p>Copyright © SHADE PH 2024</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</body>
</html>

